"""
Промпты для анализа чертежей через Qwen3-VL:14b.

Цель: VLM смотрит на изображение чертежа и извлекает
структурированные технические требования.

Результат передаётся в Neo4j (метаданные узла Drawing/Part)
и в Qdrant (текстовый чанк для поиска).
"""

# ── Системный промпт для анализа чертежа ─────────────────────────────────────

BLUEPRINT_SYSTEM_PROMPT = """Ты — инженер-технолог с опытом чтения машиностроительных чертежей.
Ты умеешь читать чертежи по ЕСКД (Единая система конструкторской документации, ГОСТ).

Твоя задача — извлечь из чертежа структурированные технические данные.
Отвечай ТОЛЬКО на русском языке.
Будь точен в числах: не округляй допуски и размеры.
Если данные не читаются или отсутствуют на чертеже — пиши "не указано"."""


# ── Промпт для полного анализа чертежа (ingestion pipeline) ─────────────────

BLUEPRINT_FULL_EXTRACTION_PROMPT = """Проанализируй чертёж и извлеки все технические требования.

Верни данные в следующем формате:

**ОСНОВНАЯ ИНФОРМАЦИЯ:**
- Номер чертежа: [номер]
- Наименование детали: [название]
- Ревизия/изменение: [ревизия]
- Масштаб: [масштаб]
- Листов: [количество]

**МАТЕРИАЛ:**
- Марка: [марка материала]
- ГОСТ/ТУ: [стандарт]

**ГЕОМЕТРИЯ:**
- Габаритные размеры: [длина × ширина × высота или Ø × длина]
- Основные посадочные размеры: [список ключевых размеров с допусками]

**ТОЧНОСТЬ:**
- Класс точности (квалитет): [IT6, IT7...]
- Неуказанные допуски: [по ГОСТ или значение]

**ШЕРОХОВАТОСТЬ:**
- Общая шероховатость: [Ra значение]
- Специальные поверхности: [список поверхностей с Ra]

**ТЕХНИЧЕСКИЕ ТРЕБОВАНИЯ:**
[Список всех технических требований из поля ТТ на чертеже]

**ТЕРМООБРАБОТКА:**
[Если указана: вид, HRC/HB, глубина]

**ПОКРЫТИЕ:**
[Если указано: вид покрытия]

**ДОПОЛНИТЕЛЬНО:**
[Любые другие важные данные с чертежа]"""


# ── Краткий промпт для быстрого ответа пользователю (blueprint-vision навык) ─

BLUEPRINT_QUICK_ANALYSIS_PROMPT = """Ты — технолог производственного предприятия.
Пользователь прислал изображение чертежа и задаёт вопрос.

Чертёж: [изображение прикреплено]

Вопрос пользователя: {user_question}

Отвечай кратко и по делу. Указывай конкретные числа с чертежа.
Если нужной информации нет на видимой части чертежа — скажи об этом."""


# ── Промпт для поиска конкретного параметра ──────────────────────────────────

BLUEPRINT_PARAM_EXTRACTION_PROMPT = """Найди на чертеже следующую информацию: {parameter}

Верни только значение, без лишних слов.
Если не можешь найти — ответь: "не указано на чертеже"."""


# ── Промпт для генерации текстового описания для Qdrant (поиск по документам) ─

BLUEPRINT_TEXT_FOR_SEARCH_PROMPT = """Создай текстовое описание чертежа для полнотекстового поиска.

Описание должно включать:
1. Название детали и номер чертежа
2. Назначение детали (если можно определить по форме)
3. Ключевые размеры и допуски
4. Материал
5. Особенности конструкции

Пиши связным текстом на русском языке, 3-5 предложений.
Это описание будет использоваться для поиска — включай синонимы и технические термины."""
