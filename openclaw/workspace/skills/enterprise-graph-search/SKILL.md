---
name: enterprise-graph-search
description: >
  Поиск по графу знаний производственного завода (Neo4j).
  Используй для вопросов о маршрутах изготовления, оснастке, станках,
  техпроцессах, деталях, инструменте и производственных связях.
user-invocable: false
---

# Enterprise Graph Search — Поиск по производственному графу

## Когда использовать этот навык

Используй ЭТОТ навык когда пользователь спрашивает о:
- Маршруте изготовления конкретной детали
- Каком станке производится деталь (ЧПУ, токарный, ТПА)
- Какая оснастка или пресс-форма нужна
- Операциях техпроцесса и их последовательности
- Какой инструмент применяется в конкретных операциях
- Связях между деталями, сборками, чертежами и материалами
- Свободны ли станки (status: ACTIVE/MAINTENANCE/IDLE)

## Как вызвать

Выполни следующую команду ТОЧНО:

```bash
curl -s --max-time 120 --connect-timeout 10 \
  -X POST http://api:8000/skills/graph-search \
  -H "Content-Type: application/json" \
  -d "{\"question\": \"<ВОПРОС_ПОЛЬЗОВАТЕЛЯ_ЗДЕСЬ>\"}"
```

**ВАЖНО**: Замени `<ВОПРОС_ПОЛЬЗОВАТЕЛЯ_ЗДЕСЬ>` на точный вопрос пользователя на русском языке. Экранируй кавычки внутри JSON.

## Интерпретация ответа

Ответ придёт в формате JSON:
```json
{
  "answer": "Текстовый ответ для пользователя",
  "records_count": 5,
  "cypher_used": "MATCH ..."
}
```

Передай пользователю содержимое поля `answer`.

## Примеры использования

**Пример 1 — маршрут детали:**
Пользователь: "Покажи маршрут изготовления детали с чертежом 123-456"
```bash
curl -s --max-time 120 --connect-timeout 10 \
  -X POST http://api:8000/skills/graph-search \
  -H "Content-Type: application/json" \
  -d "{\"question\": \"Покажи маршрут изготовления детали с чертежом 123-456\"}"
```

**Пример 2 — пресс-форма для ТПА:**
Пользователь: "Какая пресс-форма нужна для детали 'Втулка пластиковая' и на каком ТПА?"
```bash
curl -s --max-time 120 --connect-timeout 10 \
  -X POST http://api:8000/skills/graph-search \
  -H "Content-Type: application/json" \
  -d "{\"question\": \"Какая пресс-форма нужна для детали Втулка пластиковая и на каком ТПА?\"}"
```

**Пример 3 — инструмент для операций:**
```bash
curl -s --max-time 120 --connect-timeout 10 \
  -X POST http://api:8000/skills/graph-search \
  -H "Content-Type: application/json" \
  -d "{\"question\": \"Какой инструмент нужен для фрезерных операций детали Корпус редуктора?\"}"
```

## Обработка ошибок

Если curl вернул ошибку или `records_count: 0`:
- Сообщи пользователю, что данные не найдены в производственной базе
- Предложи уточнить номер чертежа или точное название детали
- НЕ придумывай данные самостоятельно
